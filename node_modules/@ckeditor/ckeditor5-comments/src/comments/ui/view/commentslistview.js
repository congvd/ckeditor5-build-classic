/*
 *             Copyright (c) 2016 - 2021, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x3974=['length','listenTo','setTemplate','_shouldCollapse','change:isActive','delete','_collapsedCommentsView','editorConfig','formatDateTime','add','change:hasDirtyComment','remove','viewUid','maxCommentsWhenCollapsed','updateComment','insert','refreshVisibleViews','set','commentViews','isActive','visibleViews','_handleRemoveCommentModel','CommentView','focus','_updateHasDirtyComment','_rearrangeExpand','from','createCollection','collapse','_handleNewCommentModel','_config','count','stopListening','change:isEditMode','removeComment','delegate','hasDirtyComment','_model','expand','weight','destroy','bind','render','maxThreadTotalWeight','comments','_rearrangeCollapse','element','isEditMode'];(function(_0x152b7d,_0x397475){const _0x17bf8c=function(_0x91263c){while(--_0x91263c){_0x152b7d['push'](_0x152b7d['shift']());}};_0x17bf8c(++_0x397475);}(_0x3974,0xbc));const _0x17bf=function(_0x152b7d,_0x397475){_0x152b7d=_0x152b7d-0x0;let _0x17bf8c=_0x3974[_0x152b7d];return _0x17bf8c;};import{View as _0x97c0f5}from'ckeditor5/src/ui';import{diff as _0x22d4bf,Collection as _0x7ecc6e}from'ckeditor5/src/utils';import _0x26fd05 from'./collapsedcommentsview';export default class Ct extends _0x97c0f5{constructor(_0x2942fd,_0x188b44,_0x2c71b7){super(_0x2942fd),this[_0x17bf('0x15')](_0x17bf('0x28'),!0x1),this['set'](_0x17bf('0x4'),_0x188b44['comments'][_0x17bf('0x4')]),this[_0x17bf('0x15')](_0x17bf('0x17'),!0x1),this[_0x17bf('0x29')]=_0x188b44,this[_0x17bf('0x22')]=_0x2c71b7,this[_0x17bf('0x16')]=this[_0x17bf('0x1f')](),this[_0x17bf('0x18')]=this['createCollection'](),this[_0x17bf('0xa')]=new _0x26fd05(_0x2942fd),this['_collapsedCommentsView'][_0x17bf('0x2d')](_0x17bf('0x23'))['to'](this,_0x17bf('0x4'),_0x8dde4f=>_0x8dde4f-this['_config'][_0x17bf('0x11')]);for(const _0x4179bc of _0x188b44[_0x17bf('0x0')])this[_0x17bf('0x21')](_0x4179bc);this[_0x17bf('0x5')](_0x188b44['comments'],_0x17bf('0xd'),(_0x1ab5c9,_0x2f59bf)=>{this[_0x17bf('0x4')]++,this[_0x17bf('0x21')](_0x2f59bf),this['refreshVisibleViews']();}),this[_0x17bf('0x5')](_0x188b44['comments'],_0x17bf('0xf'),(_0x5bd6b9,_0xc61a5)=>{this[_0x17bf('0x4')]--,this[_0x17bf('0x19')](_0xc61a5),this[_0x17bf('0x14')]();}),this[_0x17bf('0x5')](_0x188b44,'commentUpdated',()=>this[_0x17bf('0x14')]()),this['on'](_0x17bf('0x8'),()=>this[_0x17bf('0x14')]()),this['on'](_0x17bf('0xe'),()=>this['refreshVisibleViews']()),this[_0x17bf('0x6')]({'tag':'ul','attributes':{'class':['ck-thread__comments']},'children':this[_0x17bf('0x18')]});}get[_0x17bf('0x7')](){return this[_0x17bf('0x29')][_0x17bf('0x2b')]>this[_0x17bf('0x22')][_0x17bf('0x2f')]&&!this['isActive']&&!this['hasDirtyComment'];}[_0x17bf('0x2e')](){super[_0x17bf('0x2e')](),this[_0x17bf('0x14')]();}[_0x17bf('0x1b')](){this[_0x17bf('0x2')][_0x17bf('0x1b')]();}[_0x17bf('0x2c')](){this[_0x17bf('0xa')][_0x17bf('0x2c')]();for(const _0x3fdb6c of this[_0x17bf('0x16')])_0x3fdb6c[_0x17bf('0x2c')]();super[_0x17bf('0x2c')]();}[_0x17bf('0x14')](){this[_0x17bf('0x7')]?this[_0x17bf('0x1')]():this[_0x17bf('0x1d')]();}[_0x17bf('0x21')](_0x243f83){const _0x3ae53d=new this['_config'][(_0x17bf('0x1a'))](this['locale'],_0x243f83,{'maxCommentCharsWhenCollapsed':this[_0x17bf('0x22')]['maxCommentCharsWhenCollapsed'],'formatDateTime':this[_0x17bf('0x22')][_0x17bf('0xc')],'editorConfig':this[_0x17bf('0x22')][_0x17bf('0xb')]});_0x3ae53d[_0x17bf('0x10')]=_0x243f83['id'],_0x3ae53d[_0x17bf('0x27')](_0x17bf('0x26'))['to'](this),_0x3ae53d[_0x17bf('0x27')](_0x17bf('0x12'))['to'](this),this[_0x17bf('0x5')](_0x3ae53d,_0x17bf('0x25'),()=>this[_0x17bf('0x1c')]()),this[_0x17bf('0x16')]['add'](_0x3ae53d);}[_0x17bf('0x19')](_0x564f9e){const _0x9378bb=this['commentViews'][_0x17bf('0xf')](_0x564f9e['id']);this[_0x17bf('0x24')](_0x9378bb),_0x9378bb['isEditMode']&&this[_0x17bf('0x1c')](),_0x9378bb[_0x17bf('0x2c')]();}[_0x17bf('0x1c')](){this[_0x17bf('0x28')]=Array[_0x17bf('0x1e')](this[_0x17bf('0x16')])['some'](_0x12dc47=>_0x12dc47[_0x17bf('0x3')]);}[_0x17bf('0x1')](){const _0x47915f=function(_0x3d902c){const _0x29f1fb=new _0x7ecc6e();for(const _0x11ae04 of _0x3d902c)_0x29f1fb['add'](_0x11ae04);return _0x29f1fb;}(this[_0x17bf('0x16')]),_0x1b5de0=this[_0x17bf('0xa')][_0x17bf('0x23')];for(let _0x2dc265=0x1;_0x2dc265<=_0x1b5de0;_0x2dc265++)_0x47915f[_0x17bf('0xf')](0x1);for(const _0x1f147c of _0x47915f)_0x1f147c[_0x17bf('0x20')]();_0x1b5de0>0x0&&_0x47915f['add'](this[_0x17bf('0xa')],0x1),Dt(_0x22d4bf(Array[_0x17bf('0x1e')](this[_0x17bf('0x18')]),Array[_0x17bf('0x1e')](_0x47915f)),this[_0x17bf('0x18')],_0x47915f);}[_0x17bf('0x1d')](){Dt(_0x22d4bf(Array[_0x17bf('0x1e')](this[_0x17bf('0x18')]),Array[_0x17bf('0x1e')](this[_0x17bf('0x16')])),this['visibleViews'],this[_0x17bf('0x16')]);for(const _0x4aa35a of this['visibleViews'])_0x4aa35a[_0x17bf('0x2a')]();}}function Dt(_0x383b51,_0x5ba0a6,_0x4bceb1){let _0x1b4e9a=0x0;for(const _0x5343f3 of _0x383b51)switch(_0x5343f3){case _0x17bf('0x13'):_0x5ba0a6[_0x17bf('0xd')](_0x4bceb1['get'](_0x1b4e9a),_0x1b4e9a),_0x1b4e9a++;break;case _0x17bf('0x9'):_0x5ba0a6[_0x17bf('0xf')](_0x1b4e9a);break;case'equal':_0x1b4e9a++;}}