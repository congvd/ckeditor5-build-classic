/*
 *             Copyright (c) 2016 - 2021, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x6659=['from','isActive','delete','function','has','filter','activate','collection','setActiveAnnotation','deactivateAll','context','activeAnnotations','deactivate','annotationsuis-activate-missing-ui','init','_addActiveAnnotation','get','set','attach','requires','_activateAnnotation','listenTo','add','switchTo','hasActive','push','annotationsuis-register-invalid-interface','length','register','_deactivateAllAnnotations','activeUIs','_uis','plugins','AnnotationsUIs','size','_setSelectedAnnotations','detach','destroy','_removeActiveAnnotation','change:activeAnnotation','annotationsuis-annotation-mismatch','_assertAnnotationBelongsToSingleUI','_uisData'];(function(_0x7640e1,_0x66594f){const _0x4a250b=function(_0x436ddf){while(--_0x436ddf){_0x7640e1['push'](_0x7640e1['shift']());}};_0x4a250b(++_0x66594f);}(_0x6659,0x83));const _0x4a25=function(_0x7640e1,_0x66594f){_0x7640e1=_0x7640e1-0x0;let _0x4a250b=_0x6659[_0x7640e1];return _0x4a250b;};import{ContextPlugin as _0x497d09}from'ckeditor5/src/core';import{CKEditorError as _0x4c032e}from'ckeditor5/src/utils';import _0x2a1060,{bindAnnotationCollections as _0x278377}from'./annotationcollection';import _0x1dda96 from'./annotations';export default class Q extends _0x497d09{static get[_0x4a25('0x11')](){return[_0x1dda96];}static get['pluginName'](){return _0x4a25('0x1f');}constructor(_0x44ff4b){super(_0x44ff4b),this[_0x4a25('0x1c')]=new Set(),this['_uis']=new Map(),this[_0x4a25('0x28')]=new Map();}[_0x4a25('0xc')](){const _0x4a203b=this[_0x4a25('0x8')][_0x4a25('0x1e')]['get'](_0x1dda96);this['listenTo'](_0x4a203b,_0x4a25('0x12'),(_0x2a5fc9,_0x49f13e)=>{for(const _0x3e7d50 of this[_0x4a25('0x1c')]){const _0x1ca289=this[_0x4a25('0x1d')]['get'](_0x3e7d50);(0x0,this['_uisData']['get'](_0x3e7d50)[_0x4a25('0x3')])(_0x49f13e)&&_0x1ca289['setActiveAnnotation'](_0x49f13e);}}),this['listenTo'](_0x4a203b,_0x4a25('0x1b'),()=>{for(const _0x57578e of this[_0x4a25('0x1c')]){this[_0x4a25('0x1d')][_0x4a25('0xe')](_0x57578e)[_0x4a25('0x6')](null);}}),this[_0x4a25('0x13')](_0x4a203b[_0x4a25('0x5')],'add',(_0x4c1993,_0x123595)=>{this[_0x4a25('0x27')](_0x123595);});}[_0x4a25('0x16')](){return this['activeUIs'][_0x4a25('0x20')]>0x0;}[_0x4a25('0x2a')](_0x2f3268){return this[_0x4a25('0x1c')][_0x4a25('0x2')](_0x2f3268);}['activate'](_0xcf2a84,_0x380f29=()=>!0x0){const _0x22e137=this[_0x4a25('0x8')][_0x4a25('0x1e')][_0x4a25('0xe')](_0x1dda96);if(!this[_0x4a25('0x1d')]['has'](_0xcf2a84))throw new _0x4c032e(_0x4a25('0xb'),this,{'uiName':_0xcf2a84});this['isActive'](_0xcf2a84)&&this[_0x4a25('0xa')](_0xcf2a84),this['activeUIs'][_0x4a25('0x14')](_0xcf2a84);const _0x31ac9d=new _0x2a1060(),_0x2a6858=_0x22e137[_0x4a25('0x5')];_0x278377({'source':_0x2a6858,'target':_0x31ac9d,'filter':_0x380f29}),this[_0x4a25('0x28')][_0x4a25('0xf')](_0xcf2a84,{'collection':_0x31ac9d,'filter':_0x380f29});const _0xf689=this[_0x4a25('0x1d')]['get'](_0xcf2a84);_0xf689[_0x4a25('0x10')](_0x31ac9d),this['listenTo'](_0xf689,_0x4a25('0x25'),(_0x338512,_0x47bb4c,_0x4c1029,_0x1b390c)=>{_0x1b390c&&_0x22e137[_0x4a25('0x24')](_0x1b390c),_0x4c1029&&_0x22e137[_0x4a25('0xd')](_0x4c1029);});}['deactivate'](_0x299c8a){this['activeUIs'][_0x4a25('0x0')](_0x299c8a);const _0x117b0b=this[_0x4a25('0x1d')][_0x4a25('0xe')](_0x299c8a);_0x117b0b[_0x4a25('0x22')](),this['stopListening'](_0x117b0b),this[_0x4a25('0x28')][_0x4a25('0xe')](_0x299c8a)[_0x4a25('0x5')]['destroy'](),this[_0x4a25('0x28')]['delete'](_0x299c8a);}[_0x4a25('0x15')](_0x2e6279){const _0x4f7c95=this[_0x4a25('0x8')]['plugins'][_0x4a25('0xe')](_0x1dda96),_0x11d15e=Array[_0x4a25('0x29')](_0x4f7c95[_0x4a25('0x9')])[0x0]||null;this[_0x4a25('0x7')](),this[_0x4a25('0x4')](_0x2e6279);const _0x1a87b2=this[_0x4a25('0x1d')]['get'](_0x2e6279);_0x1a87b2[_0x4a25('0x6')](_0x11d15e),_0x1a87b2[_0x4a25('0x21')]&&_0x11d15e&&_0x1a87b2[_0x4a25('0x21')]([_0x11d15e]);}[_0x4a25('0x7')](){for(const _0x4323eb of this['activeUIs'])this['deactivate'](_0x4323eb);}[_0x4a25('0x1a')](_0x76dd9c,_0x1ad2a3){if(this[_0x4a25('0x1d')]['has'](_0x76dd9c))throw new _0x4c032e('annotationsuis-register-already-registered');if('function'!=typeof _0x1ad2a3[_0x4a25('0x10')]||_0x4a25('0x1')!=typeof _0x1ad2a3[_0x4a25('0x22')]||_0x4a25('0x1')!=typeof _0x1ad2a3[_0x4a25('0x6')])throw new _0x4c032e(_0x4a25('0x18'),null);this[_0x4a25('0x1d')][_0x4a25('0xf')](_0x76dd9c,_0x1ad2a3);}[_0x4a25('0x23')](){this[_0x4a25('0x7')](),super[_0x4a25('0x23')]();}['_assertAnnotationBelongsToSingleUI'](_0x3c9b3c){const _0x2d93d2=[];for(const _0x38adcc of this[_0x4a25('0x1c')]){(0x0,this[_0x4a25('0x28')]['get'](_0x38adcc)[_0x4a25('0x3')])(_0x3c9b3c)&&_0x2d93d2[_0x4a25('0x17')](_0x38adcc);}if(0x1!==_0x2d93d2[_0x4a25('0x19')])throw new _0x4c032e(_0x4a25('0x26'),null,{'matchedUIs':_0x2d93d2});}}