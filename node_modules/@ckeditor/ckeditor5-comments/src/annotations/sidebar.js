/*
 *             Copyright (c) 2016 - 2021, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x2357=['refresh','_updateLastItem','config','getSidebarItemView','listenTo','_alignBeforeItem','locale','destroy','context','change:bottom','max','_annotations','_getTargetTop','bottom','length','_sidebarItemViewToAnnotation','targetRect','_attachToContainer','setContainer','class','set','appendChild','minHeight','add','getIndex','list','_activeAnnotation','init','_getItemAfter','view','change:targetRect','_setItemTop','content','updateHeight','addAnnotation','_annotationToSidebarItemView','render','isAnimationDisabled','_targetTop','_createSidebarView','last','target','stopListening','remove','delete','change:_lastItem','unbind','sidebar-attachtocontainer-missing-container','rearrange','_destroySidebarItemView','_lastItem','sidebar-setcontainer-invalid-element','_detachFromContainer','element','isActive','change:top','top','_alignAfterItem','container','define','_alignToTargetRect','height','_spaceBetweenItems','Sidebar','_getItemBefore','get'];(function(_0x39b402,_0x2357b9){const _0x40c438=function(_0x127c00){while(--_0x127c00){_0x39b402['push'](_0x39b402['shift']());}};_0x40c438(++_0x2357b9);}(_0x2357,0x156));const _0x40c4=function(_0x39b402,_0x2357b9){_0x39b402=_0x39b402-0x0;let _0x40c438=_0x2357[_0x39b402];return _0x40c438;};import{ContextPlugin as _0x329124}from'ckeditor5/src/core';import _0x15b25c from'./view/sidebarview';import _0x21f786 from'./view/sidebaritemview';import{Rect as _0x3db0cd,CKEditorError as _0x71acb}from'ckeditor5/src/utils';import{isElement as _0x3fe3e5,throttle as _0x5b00a1}from'lodash-es';export default class $ extends _0x329124{static get['pluginName'](){return _0x40c4('0x33');}constructor(_0x537751){super(_0x537751),this[_0x40c4('0x8')](_0x40c4('0x26')),this[_0x40c4('0x11')]=this[_0x40c4('0x1b')](),this[_0x40c4('0x8')](_0x40c4('0x2e'),null),this[_0x40c4('0x32')]=0x19,this[_0x40c4('0x3')]=new Map(),this['_annotationToSidebarItemView']=new Map(),this[_0x40c4('0x3e')][_0x40c4('0x38')][_0x40c4('0x2f')]('sidebar.preventScrollOutOfView',!0x1),this[_0x40c4('0x41')]=null,this['_activeAnnotation']=null;}[_0x40c4('0xf')](){const _0x4bea19=this['context'][_0x40c4('0x38')]['get']('sidebar.container');_0x4bea19&&this[_0x40c4('0x6')](_0x4bea19);}[_0x40c4('0x6')](_0x24a0db){if(!_0x3fe3e5(_0x24a0db))throw new _0x71acb(_0x40c4('0x27'));this[_0x40c4('0x2e')]=_0x24a0db;}[_0x40c4('0x5')]({viewClass:_0x70b9e8='',spaceBetweenItems:_0x57b442=0x19}={}){if(!_0x3fe3e5(this[_0x40c4('0x2e')]))throw new _0x71acb(_0x40c4('0x23'),this);this[_0x40c4('0x2e')][_0x40c4('0x9')](this[_0x40c4('0x11')][_0x40c4('0x29')]),this[_0x40c4('0x11')]['class']=_0x70b9e8,this[_0x40c4('0x32')]=_0x57b442;}[_0x40c4('0x24')]({removedAnnotation:_0x4ec299,previousAnnotation:_0x4b1ad3,nextAnnotation:_0x177a64}){const _0x4212a3=this['getSidebarItemView'](_0x4ec299);this['view'][_0x40c4('0xd')][_0x40c4('0x1f')](_0x4212a3),this[_0x40c4('0x25')](_0x4ec299),_0x4b1ad3&&this[_0x40c4('0x30')](this[_0x40c4('0x39')](_0x4b1ad3)),_0x177a64&&this[_0x40c4('0x30')](this[_0x40c4('0x39')](_0x177a64)),this[_0x40c4('0x37')]();}[_0x40c4('0x36')]({blurredAnnotation:_0x2d5a33,activatedAnnotation:_0x396992,disableAnimationOnActivatedAnnotation:_0x2d3198}){if(this[_0x40c4('0xe')]=_0x396992,_0x2d5a33){_0x2d5a33[_0x40c4('0x2a')]=!0x1;const _0x28892f=this[_0x40c4('0x39')](_0x2d5a33);_0x28892f&&_0x2d3198&&(_0x28892f[_0x40c4('0x19')]=!0x1);}if(_0x396992){const _0x5b2841=this['getSidebarItemView'](_0x396992);_0x5b2841&&(_0x396992[_0x40c4('0x2a')]=!0x0,_0x2d3198&&(_0x5b2841['isAnimationDisabled']=!0x0,_0x5b2841[_0x40c4('0x2c')]+=0x1),this[_0x40c4('0x30')](_0x5b2841));}}[_0x40c4('0x28')](_0xf6466){this[_0x40c4('0x1e')](),this['view'][_0x40c4('0x29')][_0x40c4('0x1f')]();for(const _0x1a49d1 of _0xf6466)this['_destroySidebarItemView'](_0x1a49d1);this[_0x40c4('0x11')][_0x40c4('0xd')]['clear'](),this[_0x40c4('0x11')][_0x40c4('0x7')]='',this[_0x40c4('0x26')]=null;}[_0x40c4('0x16')](_0x4b2b65,_0x501352){_0x501352||(_0x501352=_0x4b2b65[_0x40c4('0x11')]);const _0x475861=new _0x21f786(this['context'][_0x40c4('0x3c')]);this[_0x40c4('0x3')][_0x40c4('0x8')](_0x475861,_0x4b2b65),this[_0x40c4('0x17')][_0x40c4('0x8')](_0x4b2b65,_0x475861),_0x475861[_0x40c4('0x14')][_0x40c4('0xb')](_0x501352),this[_0x40c4('0x30')](_0x475861),this[_0x40c4('0x3a')](_0x4b2b65[_0x40c4('0x11')],_0x40c4('0x12'),()=>{const _0x5a12a3=this[_0x40c4('0x0')](_0x475861);_0x475861[_0x40c4('0x1a')]!=_0x5a12a3&&(_0x475861['_targetTop']=_0x5a12a3,this[_0x40c4('0x13')](_0x475861,_0x5a12a3));}),this[_0x40c4('0x3a')](_0x475861,_0x40c4('0x2b'),_0x5b00a1(()=>{if(!_0x475861[_0x40c4('0x14')][_0x40c4('0x2')])return;const _0x38651d=this['_getItemBefore'](_0x475861);if(!_0x38651d)return;const _0x3c4802=this[_0x40c4('0x3')]['get'](_0x38651d),_0x3181fa=this[_0x40c4('0xe')];_0x3181fa&&_0x3181fa===_0x3c4802?this[_0x40c4('0x2d')](_0x38651d,_0x475861):this[_0x40c4('0x3b')](_0x475861,_0x38651d);},0xa,{'leading':!0x1})),this['listenTo'](_0x475861,_0x40c4('0x3f'),_0x5b00a1(()=>{if(!_0x475861['content']['length'])return;const _0x211cff=this[_0x40c4('0x10')](_0x475861);if(!_0x211cff)return;const _0x23a687=this[_0x40c4('0x3')][_0x40c4('0x35')](_0x211cff),_0x42fed4=this['context'][_0x40c4('0x38')][_0x40c4('0x35')]('sidebar.preventScrollOutOfView'),_0x515e4c=this['_activeAnnotation'];_0x515e4c&&_0x515e4c===_0x23a687&&_0x42fed4?(this[_0x40c4('0x3b')](_0x211cff,_0x475861),this['_alignAfterItem'](_0x475861,_0x211cff)):_0x515e4c&&_0x515e4c===_0x23a687?this[_0x40c4('0x3b')](_0x211cff,_0x475861):this[_0x40c4('0x2d')](_0x475861,_0x211cff);},0xa,{'leading':!0x1}));const _0x5d53a0=this[_0x40c4('0x34')](_0x475861);if(_0x5d53a0)this['_alignAfterItem'](_0x5d53a0,_0x475861)||this[_0x40c4('0x30')](_0x475861);else this[_0x40c4('0x30')](_0x475861);return this[_0x40c4('0x37')](),this[_0x40c4('0x11')][_0x40c4('0xd')][_0x40c4('0xb')](_0x475861),_0x475861;}[_0x40c4('0x39')](_0x194df2){return this[_0x40c4('0x17')]['get'](_0x194df2);}[_0x40c4('0x3d')](){this[_0x40c4('0x11')][_0x40c4('0x3d')]();}[_0x40c4('0x25')](_0x306e67){const _0x6aee5=this[_0x40c4('0x39')](_0x306e67);this['stopListening'](_0x6aee5),this[_0x40c4('0x1e')](_0x306e67[_0x40c4('0x11')]),_0x6aee5[_0x40c4('0x3d')](),this[_0x40c4('0x17')][_0x40c4('0x20')](_0x306e67),this[_0x40c4('0x3')][_0x40c4('0x20')](_0x6aee5);}['_createSidebarView'](){const _0x3658c0=new _0x15b25c(this[_0x40c4('0x3e')][_0x40c4('0x3c')]);return _0x3658c0[_0x40c4('0x18')](),this['on'](_0x40c4('0x21'),(_0x158603,_0x2fe9f2,_0x3ef18c,_0x262747)=>{_0x262747&&_0x3658c0[_0x40c4('0x22')](_0x40c4('0xa')),_0x3ef18c?_0x3658c0['bind'](_0x40c4('0xa'))['to'](_0x3ef18c,'bottom'):_0x3658c0[_0x40c4('0xa')]=null;}),_0x3658c0;}[_0x40c4('0x37')](){this['_lastItem']=this[_0x40c4('0x39')](this[_0x40c4('0x41')][_0x40c4('0x1c')]);}[_0x40c4('0x34')](_0x393673){const _0x3baebb=this[_0x40c4('0x3')][_0x40c4('0x35')](_0x393673),_0x212cdf=this[_0x40c4('0x41')]['get'](this[_0x40c4('0x41')][_0x40c4('0xc')](_0x3baebb)-0x1);return _0x212cdf&&this['getSidebarItemView'](_0x212cdf);}[_0x40c4('0x10')](_0x4d1941){const _0x14bf62=this[_0x40c4('0x3')][_0x40c4('0x35')](_0x4d1941),_0x6fb97c=this[_0x40c4('0x41')][_0x40c4('0x35')](this[_0x40c4('0x41')][_0x40c4('0xc')](_0x14bf62)+0x1);return _0x6fb97c&&this[_0x40c4('0x39')](_0x6fb97c);}[_0x40c4('0x3b')](_0x30786a,_0x578da1){_0x30786a[_0x40c4('0x15')]();const _0x512629=at(_0x578da1[_0x40c4('0x1')]+this['_spaceBetweenItems'],_0x30786a[_0x40c4('0x2c')]);return!!_0x512629&&(this['_setItemTop'](_0x578da1,_0x578da1[_0x40c4('0x2c')]-_0x512629),!0x0);}['_alignAfterItem'](_0x4894be,_0x45a64e){_0x4894be[_0x40c4('0x15')]();const _0x2810c3=at(_0x4894be[_0x40c4('0x1')]+this['_spaceBetweenItems'],_0x45a64e[_0x40c4('0x2c')]);return!!_0x2810c3&&(this[_0x40c4('0x13')](_0x45a64e,_0x45a64e[_0x40c4('0x2c')]+_0x2810c3,!0x1),!0x0);}[_0x40c4('0x30')](_0x3781c0){const _0x58a59a=this[_0x40c4('0x3')]['get'](_0x3781c0);if(!_0x58a59a||!_0x58a59a[_0x40c4('0x1d')])return;const _0xa08d35=this[_0x40c4('0x0')](_0x3781c0);this['_setItemTop'](_0x3781c0,_0xa08d35);}['_getTargetTop'](_0x363088){const _0x53e660=this[_0x40c4('0x3')]['get'](_0x363088);if(_0x53e660[_0x40c4('0x1d')]instanceof _0x3db0cd)return _0x53e660[_0x40c4('0x4')][_0x40c4('0x2c')];{const _0x3b0bfc=new _0x3db0cd(this[_0x40c4('0x11')][_0x40c4('0x29')])[_0x40c4('0x2c')];return _0x53e660[_0x40c4('0x4')][_0x40c4('0x2c')]-_0x3b0bfc;}}['_setItemTop'](_0x1cfae0,_0x1a3772,_0x57a988=this[_0x40c4('0x3e')][_0x40c4('0x38')][_0x40c4('0x35')]('sidebar.preventScrollOutOfView')){_0x57a988&&(_0x1a3772=Math[_0x40c4('0x40')](_0x1a3772,this['_getMaxAvailableTop'](_0x1cfae0))),_0x1cfae0['top']=_0x1a3772;}['_getMaxAvailableTop'](_0xc04620){let _0x594a38=this[_0x40c4('0x34')](_0xc04620),_0x149185=0x0;for(;_0x594a38;)_0x594a38[_0x40c4('0x15')](),_0x149185+=this[_0x40c4('0x32')]+_0x594a38[_0x40c4('0x31')],_0x594a38=this['_getItemBefore'](_0x594a38);return _0x149185;}}function at(_0x581697,_0x4505d3){return Math[_0x40c4('0x40')](_0x581697-_0x4505d3,0x0);}