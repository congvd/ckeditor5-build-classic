/*
 *             Copyright (c) 2016 - 2021, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x4236=['innerView','fire','top','view','add','has','refreshPositioning','clear','getByView','listenTo','focusTracker','annotationcollection-not-existing-item','_focusTracker','length','stopListening','max','from','remove','sort','targetRect','_sort','annotationcollection-duplicated-item','focusableElements','getIndex','updateTargetRect','focus','blur','destroy','isFocused','_getOrderInContent','_viewToAnnotation','get','left','delete','target','change:isFocused','_innerViewToAnnotation','set'];(function(_0xd80a44,_0x423619){const _0x28c851=function(_0x3cc1f1){while(--_0x3cc1f1){_0xd80a44['push'](_0xd80a44['shift']());}};_0x28c851(++_0x423619);}(_0x4236,0x9c));const _0x28c8=function(_0xd80a44,_0x423619){_0xd80a44=_0xd80a44-0x0;let _0x28c851=_0x4236[_0xd80a44];return _0x28c851;};import{CKEditorError as _0x3c4b80,Collection as _0x1f48f7,Rect as _0x5b30ff,FocusTracker as _0x4ef761}from'ckeditor5/src/utils';export default class J extends _0x1f48f7{constructor(_0x56e7f8=[]){super(),this[_0x28c8('0x20')]=new Map(),this['_viewToAnnotation']=new Map(),this[_0x28c8('0x8')]=new _0x4ef761(),this[_0x28c8('0x8')]['on'](_0x28c8('0x1f'),(_0x54209e,_0x1e8a46,_0x589360)=>{_0x589360||this[_0x28c8('0x23')](_0x28c8('0x16'));});for(const _0x4a75b8 of _0x56e7f8)this['add'](_0x4a75b8);}get[_0x28c8('0x18')](){return this[_0x28c8('0x8')][_0x28c8('0x18')];}['add'](_0x34b987){if(this[_0x28c8('0x1')](_0x34b987))throw new _0x3c4b80(_0x28c8('0x11'),null);this['_innerViewToAnnotation'][_0x28c8('0x21')](_0x34b987[_0x28c8('0x22')],_0x34b987),this['_viewToAnnotation']['set'](_0x34b987[_0x28c8('0x25')],_0x34b987);for(const _0x103e6b of _0x34b987[_0x28c8('0x12')])this['_focusTracker'][_0x28c8('0x0')](_0x103e6b);this[_0x28c8('0x5')](_0x34b987[_0x28c8('0x12')],'add',(_0x4a7f40,_0x25ffc0)=>{this['_focusTracker'][_0x28c8('0x0')](_0x25ffc0);}),this[_0x28c8('0x5')](_0x34b987['focusableElements'],_0x28c8('0xd'),(_0x358c0a,_0xa9041)=>{this[_0x28c8('0x8')][_0x28c8('0xd')](_0xa9041);}),this[_0x28c8('0x5')](_0x34b987[_0x28c8('0x25')][_0x28c8('0x6')],'change:isFocused',(_0x15c7ac,_0x55e790,_0x106e8b)=>{_0x106e8b&&this[_0x28c8('0x23')](_0x28c8('0x15'),_0x34b987);});const _0x583d57=this[_0x28c8('0x19')](_0x34b987);super['add'](_0x34b987,_0x583d57),_0x34b987[_0x28c8('0x14')]();}[_0x28c8('0xd')](_0x472df8){if(!this['has'](_0x472df8))throw new _0x3c4b80(_0x28c8('0x7'),null);this[_0x28c8('0xa')](_0x472df8[_0x28c8('0x25')][_0x28c8('0x6')]),this[_0x28c8('0xa')](_0x472df8[_0x28c8('0x12')]);for(const _0x199547 of _0x472df8[_0x28c8('0x12')])this[_0x28c8('0x8')]['remove'](_0x199547);this[_0x28c8('0x1a')][_0x28c8('0x1d')](_0x472df8[_0x28c8('0x25')]),this[_0x28c8('0x20')][_0x28c8('0x1d')](_0x472df8['innerView']),super[_0x28c8('0xd')](_0x472df8);}['getByInnerView'](_0x2af334){return this[_0x28c8('0x20')][_0x28c8('0x1b')](_0x2af334);}[_0x28c8('0x4')](_0x55a24e){return this[_0x28c8('0x1a')][_0x28c8('0x1b')](_0x55a24e);}[_0x28c8('0x17')](){super[_0x28c8('0x3')](),this[_0x28c8('0xa')](),this[_0x28c8('0x20')]=null,this[_0x28c8('0x1a')]=null,this['_focusTracker'][_0x28c8('0x17')]();}[_0x28c8('0x2')](){for(const _0x27b35b of this)_0x27b35b[_0x28c8('0x14')]();this[_0x28c8('0x10')]();}[_0x28c8('0x10')](){const _0x53f44f=Array[_0x28c8('0xc')](this)[_0x28c8('0xe')]((_0x36b401,_0x362700)=>K(_0x36b401[_0x28c8('0xf')],_0x362700[_0x28c8('0xf')]));for(let _0x408c20=_0x53f44f[_0x28c8('0x9')]-0x1;_0x408c20>0x0;_0x408c20--){const _0x1a4511=_0x53f44f[_0x408c20];_0x408c20!==this[_0x28c8('0x13')](_0x1a4511)&&(this['remove'](_0x1a4511),this[_0x28c8('0x0')](_0x1a4511,_0x408c20));}}[_0x28c8('0x19')](_0x3c9266){let _0x5b4963=0x0;for(const _0x5577d6 of this){const _0x5087b0=_0x5577d6[_0x28c8('0x1e')];if(_0x5087b0){if(K(_0x3c9266['targetRect'],new _0x5b30ff(_0x5087b0))<0x0)return _0x5b4963;_0x5b4963++;}}return Math[_0x28c8('0xb')](0x0,_0x5b4963);}}export function bindAnnotationCollections({source:_0x4bb20f,target:_0x1d6c99,filter:_0x185c05}){for(const _0x2f2293 of _0x4bb20f)_0x185c05(_0x2f2293)&&_0x1d6c99[_0x28c8('0x0')](_0x2f2293);_0x1d6c99['listenTo'](_0x4bb20f,_0x28c8('0x0'),(_0x1248bc,_0x506495)=>{_0x185c05(_0x506495)&&_0x1d6c99[_0x28c8('0x0')](_0x506495);}),_0x1d6c99[_0x28c8('0x5')](_0x4bb20f,'remove',(_0x36271f,_0x2fa81b)=>{_0x185c05(_0x2fa81b)&&_0x1d6c99[_0x28c8('0xd')](_0x2fa81b);});}function K(_0x2f7d28,_0x14171b){const _0x550a17=_0x2f7d28[_0x28c8('0x24')]-_0x14171b[_0x28c8('0x24')];return 0x0==_0x550a17?_0x2f7d28[_0x28c8('0x1c')]-_0x14171b[_0x28c8('0x1c')]:_0x550a17;}